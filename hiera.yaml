---
version: 5
defaults:
  datadir: data
  data_hash: yaml_data

hierarchy:
  - name: "OS Family"
    path: "%{facts.osfamily}.yaml"

  - name: "Common data"
    path: "common.yaml"
  - name: Eyaml Data
    paths: 
      - "secure.eyaml" 
      - "nodes/%{trusted.certname}.eyaml" 
      - 'virtual/%{facts.virtual}.yaml'  
      - "os/%{facts.os.family}.eyaml" 
      - "common.yaml" 
    lookup_key: eyaml_lookup_key 
 
options: 
  pkcs7_private_key: /etc/puppetlabs/puppet/keys/private_key.pkcs7.pem 
  pkcs7_public_key: /etc/puppetlabs/puppet/keys/public_key.pkcs7.pem